var ApiTaster={formAction:"",disableSubmitButton:function(){$("#submit-api").attr("disabled",!0)},enableSubmitButton:function(){$("#submit-api").attr("disabled",!1)},disableUrlParams:function(){$("fieldset[ref=url-params] input").prop("disabled",!0)},enableUrlParams:function(){$("fieldset[ref=url-params] input").prop("disabled",!1)},storeFormActionFor:function(e){ApiTaster.formAction=e.attr("action")},restoreFormActionFor:function(e){$(e).attr("action",ApiTaster.formAction)},detectContentType:function(e){var t=e.getResponseHeader("Content-Type"),n=null;return t.match(/application\/json/)&&(n="json"),n}};$.fn.extend({replaceUrlParams:function(e){var t=this;ApiTaster.storeFormActionFor(t);var n=t.attr("action");$.each(e,function(e,t){var r=t.name.match(/\[api_taster_url_params\](.*)/);if(r){var i=r[1],s=t.value,o=new RegExp(":"+i);n=n.replace(o,s)}}),t.attr("action",n)},enableNavTabsFor:function(e){var t=this;$("ul.nav-tabs a",t).click(function(n){n.preventDefault(),$(this).parent().siblings().removeClass("active"),$(this).parent().addClass("active"),$(e,t).hide(),$(e+"[ref="+$(this).attr("id")+"]",t).show()})},showNavTab:function(e){return $("ul.nav-tabs li",this).removeClass("active"),$("ul.nav-tabs li a#response-"+e,this).parent().show().addClass("active"),$("pre",this).hide(),$("pre[ref=response-"+e+"]",this).show()},displayOnlySelectedParamsFieldset:function(){$("fieldset",this).hide(),$("fieldset[ref="+$("ul.nav-tabs li.active a").attr("id")+"]",this).show()}}),jQuery(function(e){e("#list-api-div a").click(function(t){t.preventDefault(),e(this).parent().siblings().removeClass("active"),e(this).parent().addClass("active"),e("#show-api-div .div-container").load(this.href,function(){prettyPrint(),e("#show-api-div form").enableNavTabsFor("fieldset"),e("#show-api-div form").displayOnlySelectedParamsFieldset()})}),e("#show-api-div").on("click","#submit-api",function(){e(this).parents("form").submit(function(){ApiTaster.disableSubmitButton(),e(this).unbind("submit").ajaxSubmit({beforeSubmit:function(e,t,n){return t.replaceUrlParams(e),ApiTaster.disableUrlParams(),!1}})}),e("form").bind("ajax:complete",function(t,n,r){ApiTaster.enableSubmitButton(),ApiTaster.enableUrlParams(),ApiTaster.restoreFormActionFor(this),e("#show-api-response-div:visible").length==0&&e("#show-api-response-div").slideDown(100);switch(ApiTaster.detectContentType(n)){case"json":e("#show-api-response-div").showNavTab("json").text(JSON.stringify(JSON.parse(n.responseText),null,2))}e("#show-api-response-div pre[ref=response-raw]").text(n.responseText),prettyPrint()}),e("#show-api-response-div").enableNavTabsFor("pre")})});